{% extends "base.html" %}

{% block title %}Apply for Leave{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h2 class="section-title">Apply for Leave</h2>
        <p style="color: var(--text-muted); margin-top: 0.25rem;">Submit a leave request for a specific subject and date.</p>
    </div>
    <div class="section-actions">
        <a href="{{ url_for('my_leaves') }}" class="btn btn-secondary">
            <i class="fas fa-list"></i> View My Leaves
        </a>
        <a href="{{ url_for('student_dashboard') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>
</div>

<div class="form-section" style="max-width: 640px;">
    <form method="POST" action="{{ url_for('apply_leave') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

        <div class="form-group">
            <label for="subject_id" class="form-label">Subject *</label>
            <select class="form-control" id="subject_id" name="subject_id" required>
                <option value="">Select Subject</option>
                {% for subject in subjects %}
                <option value="{{ subject.subject_id }}">{{ subject.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="leave_date" class="form-label">Leave Date *</label>
            <input type="date" class="form-control" id="leave_date" name="leave_date" required>
        </div>

        <div class="form-group">
            <label for="reason" class="form-label">Reason *</label>
            <textarea class="form-control" id="reason" name="reason" rows="4"
                placeholder="Please provide a detailed reason for your leave..." required></textarea>
        </div>

        <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-top: 0.5rem;">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-paper-plane"></i> Submit Application
            </button>
            <a href="{{ url_for('my_leaves') }}" class="btn btn-secondary">
                <i class="fas fa-list"></i> View My Leaves
            </a>
            <a href="{{ url_for('student_dashboard') }}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
        </div>
    </form>
</div>

<script>
    // Set minimum date to today
    document.getElementById('leave_date').min = new Date().toISOString().split('T')[0];
</script>
{% endblock %}